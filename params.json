{"name":"Lua4","tagline":"A few small trap about lua ","body":"`lua的一些小陷阱`\r\n\r\n北京的四九来了,冻死了......    \r\n\r\n1.lua陷阱之的return语句:\r\n====\r\n\r\n```c\r\nlocal function rt_test()\r\n   \r\n    print(\"func start\")\r\n    \r\n    if 1 then\r\n    \r\n        print(\"if entry!\")\r\n        return \r\n        print(\"return end\")\r\n    else\r\n        print(\"if exit\")  \r\n    \r\n    end \r\n    \r\n    print(\"func end\")\r\nend  \r\n\r\n\r\nrt_test()\r\n```\r\n结果:   \r\n\r\n```\r\nfunc start    \r\nif entry!   \r\nreturn end    \r\nfunc end    \r\n```\r\n\r\n对结果就是这样,xie过c的都知道return后面的语句就不会执行了,可是这里lua就反人类了.    \r\n其实在lua中return的用法是我们使用错了,但是为啥用法错了 也不报个错呀!!!!!    \r\n\r\n追到底,还是我们对lua的编译解析没有彻底的理解,下面你就知道了:  \r\n\r\n```c\r\nlocal function rt_test()\r\n   \r\n    print(\"func start\")\r\n    \r\n    if 1 then\r\n    \r\n        print(\"if entry!\")\r\n        return\r\n        119 \r\n        -- print(\"return end\")\r\n    else\r\n        print(\"if exit\")  \r\n    \r\n    end \r\n    \r\n    print(\"func end\")\r\nend  \r\n\r\nprint(rt_test())\r\n```   \r\n结果: \r\n```\r\nfunc start\r\nif entry!\r\n119\r\n```\r\n\r\n看到了吧,最后打印了119,注意上面return 和 119就是在两行.[可以简单的猜测了吧,return 后面的东西 当做返回值了].     \r\n\r\n如果为了测试,我们可以这样使用:   \r\n    \r\n    do return end\r\n\r\n2.lua中的函数名陷阱:\r\n====\r\n```c\r\nfunction test_a()\r\n    print(\"a\")\r\nend\r\n \r\ntest_a()                 \r\n \r\nfunction test_a()\r\n    print(\"b\")\r\nend\r\n \r\ntest_a()  \r\n```\r\n\r\n\r\n结果:\r\n```\r\na\r\nb\r\n``` \r\n竟然不报错,同名的函数竟然通过了.最后才知道 lua是把这些函数名存在一个表中,当调用的时候只是从栈顶pop而已.   \r\n    \r\n3.再来一个小的技巧:\r\n====\r\n```c\r\nfunction printargs(...)\r\nlocal num_args=select(\"#\", ...)  --获取传递参数饿个数\r\n    print(num_args, \"  \", type(num_args))\r\n    for i=1 ,num_args do  \r\n        local arg=select(i, ...) --获取第i个参数\r\n        print (i,arg)\r\n   end \r\nend\r\nprintargs(\"a\",\"b\",3,\"d\")\r\n```\r\n结果:   \r\n```\r\n4      \tnumber\r\n1\ta\r\n2\tb\r\n3\t3\r\n4\td\r\n```\r\n\r\n没错在lua中就是这么简单-----实现一个多函数参数.    \r\n    \r\n后面遇到了,在补充.   \r\n\r\n\r\nCommunite  \r\n====\r\n \r\n在使用中有任何问题，欢迎反馈给我，可以用以下联系方式跟我交流\r\n\r\n* 邮件(1031379296#qq.com, 把#换成@)\r\n* QQ: 1031379296\r\n* weibo: [@王发康](http://weibo.com/fakangwang)\r\n\r\n\r\nThx\r\n====\r\n\r\n* chunshengsterATgmail.com\r\n\r\n\r\nAuthor\r\n====\r\n* Linux\\nginx\\golang\\c\\c++爱好者\r\n* 欢迎一起交流  一起学习# \r\n* Others say good and Others good\r\n","google":"A few small trap about lua  陷阱","note":"Don't delete this file! It's used internally to help with page regeneration."}